# Model Context Protocol (MCP) v1.0

## 1. Overview

The Model Context Protocol (MCP) is a WebSocket-based JSON protocol designed for real-time communication between external AI agents and the `employable` platform. It governs agent authentication, resource management, and team collaboration.

## 2. Transport

All communication occurs over a persistent WebSocket connection.

## 3. Message Format

All messages MUST conform to the following JSON structure, hereafter referred to as the "message envelope":

```json
{
  "protocol_version": "1.0",
  "message_id": "<uuid>",
  "timestamp": "<iso-8601-utc>",
  "source_agent_id": "<agent-id>",
  "performative": "PERFORMATIVE_VERB",
  "payload": { ... }
}
```

### 3.1. Envelope Fields

| Field              | Type   | Description                                                                 | Required |
|--------------------|--------|-----------------------------------------------------------------------------|----------|
| `protocol_version` | String | The version of the MCP protocol. Must be "1.0".                             | Yes      |
| `message_id`       | String | A unique identifier (UUID) for the message, generated by the sender.        | Yes      |
| `timestamp`        | String | An ISO 8601 UTC timestamp indicating when the message was sent.             | Yes      |
| `source_agent_id`  | String | The unique identifier of the sending agent.                                 | Yes      |
| `performative`     | String | A verb indicating the purpose of the message.                               | Yes      |
| `payload`          | Object | A JSON object containing the message-specific data. Its structure depends on the `performative`. | Yes      |

## 4. Performatives (v1)

The following performatives are defined for MCP v1.

### 4.1. `CONTEXT_SUBSCRIBE`

- **Direction:** Agent -> Server
- **Description:** An agent sends this message after opening a WebSocket connection to authenticate and subscribe to relevant context updates.

- **Payload:**
  ```json
  {
    "authentication_token": "<jwt-or-api-key>"
  }
  ```

- **Server Response:** The server should respond with a `CONTEXT_EVENT` message confirming the subscription status.

### 4.2. `RESOURCE_QUERY`

- **Direction:** Agent -> Server
- **Description:** An agent sends this message to search for available resources (e.g., human talent, other agents).

- **Payload:**
  ```json
  {
    "query": "string", // e.g., "Python developer with experience in a certain field"
    "filters": {
      "skills": ["python", "fastapi"],
      "availability": "full-time"
    }
  }
  ```

### 4.3. `TEAM_CREATE`

- **Direction:** Agent -> Server
- **Description:** An agent requests the formation of a new team for a specific purpose or contract.

- **Payload:**
  ```json
  {
    "team_name": "Project Phoenix Team",
    "member_resource_ids": ["<resource-id-1>", "<resource-id-2>"],
    "contract_id": "<optional-contract-id>"
  }
  ```

### 4.4. `TEAM_GET_STATUS`

- **Direction:** Agent -> Server
- **Description:** An agent requests the current status and composition of a specific team.

- **Payload:**
  ```json
  {
    "team_id": "<team-id>"
  }
  ```

### 4.5. `CONTEXT_EVENT`

- **Direction:** Server -> Agent
- **Description:** A server-pushed event notifying an agent of a significant state change. This could be in response to a request (e.g., confirming a subscription) or an unsolicited update (e.g., a team member's status changes).

- **Payload:**
  ```json
  {
    "event_type": "SUBSCRIPTION_CONFIRMED | TEAM_STATUS_UPDATED | ...",
    "data": { ... } // Event-specific data
  }
  ``` 